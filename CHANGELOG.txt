CHANGELOG

### v3.4.0 - Chart Visualization + Schema ER Diagram (Feb 2026)

#### Features
- **Chart Visualization:** "Chart" button on every query result table. Auto-detects bar, line, pie, or scatter chart type based on column data types. Chart type selector toggles between types. Charts respect dark/light theme and update on theme change.
- **Schema ER Diagram:** "Schema Diagram" button in sidebar opens near-full-screen modal with interactive SVG entity-relationship diagram. Force-directed layout clusters related tables. Drag tables, scroll to zoom, pan background. Click table to highlight its connections. No external library — pure SVG + vanilla JS.

#### Backend
- New endpoint `/api/schema/diagram` returns table columns, types, PKs, and FK relationships as JSON.

#### Dependencies
- Chart.js 4.x vendored in `static/lib/chart.umd.min.js`

### v3.3.2 - One-Line Installer Scripts (Feb 7, 2026)

#### Features
- **curl | sh installer (Linux/macOS):** `curl -fsSL <url> | sh` downloads source archive from GitHub and extracts to `~/yourSQLfriend` — no git required.
- **PowerShell installer (Windows):** `irm <url> | iex` downloads zip archive and extracts via `Expand-Archive` — no git required.
- **Update support:** Re-run with `--update` flag to replace an existing installation.
- **Custom install path:** Set `INSTALL_DIR` env var to change install location.
- **Prerequisite checks:** Both scripts verify Python 3.10+, download tools (curl/wget), and provide clear error messages.

#### Docs
- **README updated:** One-liner install commands are now the primary Quick Start method; git clone moved to alternative.

### v3.3.1 - Responsive Table Fix + Persistent ASCII Banner (Feb 7, 2026)

#### Fixes
- **Table Overflow Fix:** Grid.js result tables no longer spill outside chat bubbles at narrow viewport widths. Added overflow containment on bot message containers and horizontal scroll on the results wrapper.
- **ASCII Art Banner Persistence:** Minimized welcome banner no longer disappears when scrolling through chat messages. On first message, the banner is moved above the scrollable chat area so it stays pinned as a compact header bar.
- **Transition Scoping:** Welcome screen CSS transition narrowed from `all` to specific properties (`padding`, `min-height`) to prevent visual artifacts during minimize.

### v3.3 - Browser-First Pivot + PWA Support (Feb 7, 2026)

#### Architecture Change
- **Dropped pywebview/PyInstaller** — Embraces the browser as the UI runtime for superior CSS rendering, right-click menus, scrollbar behavior, and theme support.
- **PWA Support:** Added `manifest.json` and service worker so Chrome/Edge/Brave users can "Install" the app as a standalone window with desktop icon.
- **Launcher Scripts:** Added `run.sh` (Linux/macOS) and `run.bat` (Windows) — one-command setup that creates venv, installs deps, and opens the browser.
- **Auto-Browser-Open:** `python app.py` now auto-opens the default browser (like Jupyter). Use `--no-browser` to disable.
- **CLI Flags:** Added `--port` and `--host` arguments to `app.py` for flexible deployment.

#### Removed
- Deleted `main.py` (pywebview desktop wrapper)
- Deleted `build_linux.sh`, `build_windows.bat`, `yourSQLfriend.spec` (PyInstaller build infrastructure)
- Removed `pywebview>=5.0` from `requirements.txt`
- Removed `get_base_path()` / `sys._MEIPASS` PyInstaller path resolution from `app.py`
- Removed `/upload_path` route from `app.py` (pywebview-only endpoint)
- Removed ~120 lines of pywebview-specific JS: file dialog setup, desktop context menu, desktop export path, pywebview timing workarounds
- Removed desktop context menu CSS styles

---

### Earlier History (v1.1–v3.2)

Versions 3.0–3.2 explored packaging as a native desktop app via pywebview and PyInstaller. That approach was superseded by the browser-first PWA architecture in v3.3. The desktop-specific build scripts, fixes, and workarounds from those versions have been removed.

Key milestones from the pre-PWA era:

- **v3.2** — LLM pipeline overhaul: richer schema context (DDL + foreign keys + sample rows), decision framework for SQL vs plain-language answers, few-shot examples in system prompt
- **v3.1** — SQL auto-retry on error, enriched schema with column types and constraints, security hardening (14 bare `except:` fixes, quoted PRAGMA table names), ARIA accessibility on modals, favicon
- **v3.0** — Version display endpoint, LLM connection guidance in sidebar, refresh button with confirmation modal
- **v2.5** — Dual LLM provider support (LM Studio + Ollama) with status polling, dynamic model selection, XSS prevention in exports and search
- **v2.4** — Custom confirmation/alert modals with focus management
- **v2.2** — Digital Forensics Terminal theme (JetBrains Mono, amber/cyan palette, scan-line effects, slide-in animations)
- **v2.0** — Dark/light theme toggle, Search All Tables, 12 forensic SQL functions (timestamp converters, base64/hex encode-decode, pattern extractors), multi-column sorting
- **v1.7** — CTE (WITH clause) support, EXPLAIN/PRAGMA support, database-level read-only enforcement (`mode=ro` + `query_only`)
- **v1.6** — Grid.js interactive tables, forensic annotations on messages, syntax highlighting
- **v1.5** — Drag-and-drop file upload, persistent welcome banner
- **v1.4** — SHA256 evidence hashing, audit logging, forensic export headers, CSV/SQL file import, file validation, backend timeouts
- **v1.2** — Token usage tracking with hover breakdown
- **v1.1** — Chat export styling, upload confirmation dialogs
